<?php

namespace App\Controllers;
use Core\Controller;
use Core\View;
use App\Models\DAO\UserDAO;
use dbObject;
use MysqliDb;

class Home extends Controller
{

    public function indexAction(){
        $cartItemsFinder = $this->getEntityManager()->getRepository("App\Models\CartItems");
        $cartItems = $cartItemsFinder->findBy(['user'=>'1']);
        $cartItems[0]->setQuantity($cartItems[0]->getQuantity()+2);
        $this->getEntityManager()->flush();
        echo '<pre>';
        foreach ($cartItems as $item){
            echo 'item'.$item->getItem()->getId().', quantity:'.$item->getQuantity();
        }
//        var_dump($cartItems[0]->getUser()->getUserName());
        echo '</pre>';

        $userFinder = $this->getEntityManager()->getRepository("App\Models\Users");
        $user = $userFinder->find(1);
        echo '<pre>';
//            var_dump($user);
        echo '</pre>';
//        View::renderTemplate("Home/index.twig");
    }

    public function testAction(){

    }
}