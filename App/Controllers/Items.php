<?php


namespace App\Controllers;
use Core\DAO;
use Core\View;

class Items extends \Core\Controller
{
    public function __construct($route_params)
    {
        parent::__construct($route_params);
    }

    public function indexAction(){
        if(isset($this->route_params['id'])){
            $id = $this->route_params['id'];

            $item = DAO::getEntityManager()->find(':Items', $id);
            View::renderTemplate("Items/item-details.twig", ["item"=>$item, "route_params" => $this->route_params]);
        }else{
            $itemRepo = DAO::getEntityManager()->getRepository(':Items');
            $items = $itemRepo->findAll();
            View::renderTemplate("Items/items.twig", ["items"=>$items]);
        }
    }
}